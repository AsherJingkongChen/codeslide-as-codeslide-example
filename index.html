<!DOCTYPE HTML>
<html class="hljs">
<head>
<meta charset="utf-8">
<meta
  name="description"
  content="CodeSlide makes a slideshow for code snippets">
<meta
  name="viewport"
  content="width=device-width, initial-scale=1">
<style>
pre code.hljs {
  display: block;
  overflow-x: auto;
  padding: 1em;
}
code.hljs {
  padding: 3px 5px;
}
/*!
Retrieved from https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark-dimmed.min.css

Theme: GitHub Dark Dimmed
Description: Dark dimmed theme as seen on github.com
Author: github.com
Maintainer: @Hirse
Updated: 2021-05-15

Colors taken from GitHub's CSS
*/
.hljs {
  color: #adbac7;
  background: #22272e;
}
.hljs-doctag,
.hljs-keyword,
.hljs-meta .hljs-keyword,
.hljs-template-tag,
.hljs-template-variable,
.hljs-type,
.hljs-variable.language_ {
  color: #f47067;
}
.hljs-title,
.hljs-title.class_,
.hljs-title.class_.inherited__,
.hljs-title.function_ {
  color: #dcbdfb;
}
.hljs-attr,
.hljs-attribute,
.hljs-literal,
.hljs-meta,
.hljs-number,
.hljs-operator,
.hljs-selector-attr,
.hljs-selector-class,
.hljs-selector-id,
.hljs-variable {
  color: #6cb6ff;
}
.hljs-meta .hljs-string,
.hljs-regexp,
.hljs-string {
  color: #96d0ff;
}
.hljs-built_in,
.hljs-symbol {
  color: #f69d50;
}
.hljs-code,
.hljs-comment,
.hljs-formula {
  color: #768390;
}
.hljs-name,
.hljs-quote,
.hljs-selector-pseudo,
.hljs-selector-tag {
  color: #8ddb8c;
}
.hljs-subst {
  color: #adbac7;
}
.hljs-section {
  color: #316dca;
  font-weight: 700;
}
.hljs-bullet {
  color: #eac55f;
}
.hljs-emphasis {
  color: #adbac7;
  font-style: italic;
}
.hljs-strong {
  color: #adbac7;
  font-weight: 700;
}
.hljs-addition {
  color: #b4f1b4;
  background-color: #1b4721;
}
.hljs-deletion {
  color: #ffd8d3;
  background-color: #78191b;
}

/*! CodeSlide slides.horizontal.css */
html, body {
  margin: 0;
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  overflow: hidden;
}
a {
  color: dodgerblue;
}
li {
  margin-top: 0.25em;
}
p:empty {
  display: none;
}
pre {
  white-space: pre-wrap;
  overflow-wrap: break-word;
}
pre > code {
  display: block;
  padding: 1em;
}
.slide {
  min-width: calc(100vw - 4em);
  height: calc(100vh - 2em);
  padding: 1em 2em;
  overflow-y: scroll;
  scroll-snap-align: start;
  scroll-snap-stop: always;
  scrollbar-width: none;
}
.slide::-webkit-scrollbar {
  display: none;
}
@media only screen and (max-width: 768px) {
  .slide {
    height: calc(90% - 2em);
    height: calc(100svh - 2em);
  }
}
#slides {
  display: flex;
  flex-direction: row;
  width: 100vw;
  height: 100vh;
  overflow-x: scroll;
  overscroll-behavior: none;
  scroll-behavior: smooth;
  scroll-snap-type: x mandatory;
}
@media print {
  @page {
    margin: 0;
    size: auto;
  }
  #slides {
    width: auto;
    height: auto;
  }
}

@font-face {
  font-family: 'Noto Sans Mono';
  font-style: normal;
  font-weight: 400;
  font-stretch: normal;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/notosansmono/v26/BngrUXNETWXI6LwhGYvaxZikqZqK6fBq6kPvUce2oAZcdthSBUsYck4-_FNJ49o.ttf) format('truetype');
}
@font-face {
  font-family: 'Noto Sans Mono';
  font-style: normal;
  font-weight: 700;
  font-stretch: normal;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/notosansmono/v26/BngrUXNETWXI6LwhGYvaxZikqZqK6fBq6kPvUce2oAZcdthSBUsYck4-_LRO49o.ttf) format('truetype');
}

code {
  font-family: Noto Sans Mono, ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
  font-size: 85%;
}
#slides {
  font-family: system-ui;
  font-size: large;
  font-weight: normal;
  line-height: 1.5;
}
</style>
</head>
<body class="hljs">
<div id="slides">
<div class="slide" id="slide_0">
<h1 id="behind-the-scenes-of-codeslide">Behind the Scenes of CodeSlide</h1>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">code</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;slide&quot;</span>&gt;</span>
</code></pre>
</div>
<div class="slide" id="slide_1">
<p><h1 id="codeslide">CodeSlide</h1>
<p><a href="https://www.npmjs.com/package/codeslide-cli?activeTab=readme"><img src="https://img.shields.io/npm/v/codeslide-cli?color=%230647D4&label=npm%3Acodeslide-cli&style=flat-square" alt=""></a></p>
<h2 id="features">Features</h2>
<ul>
<li>CodeSlide makes a slideshow for code snippets</li>
<li>Its applications:<ul>
<li><a href="https://github.com/AsherJingkongChen/codeslide/tree/main/applications/cli">CodeSlide CLI</a></li>
</ul>
</li>
</ul>
<h2 id="dependencies">Dependencies</h2>
<ul>
<li>It uses <a href="https://github.com/lquixada/cross-fetch">cross-fetch</a> as resource fetcher</li>
<li>It uses <a href="https://github.com/evanw/esbuild">esbuild</a> as module bundler</li>
<li>It uses <a href="https://github.com/jonschlinkert/gray-matter">gray-matter</a> as YAML Front Matter parser</li>
<li>It uses <a href="https://github.com/tj/commander.js">Commander.js</a> as CLI framework</li>
<li>It uses <a href="https://github.com/eta-dev/eta">Eta</a> as HTML template engine</li>
<li>It uses <a href="https://github.com/highlightjs/highlight.js">Highlight.js</a> as syntax highlighter</li>
<li>It uses <a href="https://github.com/markedjs/marked">Marked</a> as Markdown renderer</li>
<li>It uses <a href="https://github.com/puppeteer/puppeteer">Puppeteer</a> as PDF printer</li>
<li>It uses <a href="https://www.typescriptlang.org/">TypeScript</a> as the main programming language</li>
<li>It uses <a href="https://github.com/colinhacks/zod">Zod</a> as JSON schema validator</li>
</ul>
<h2 id="documents">Documents</h2>
<ul>
<li>See <a href="https://github.com/AsherJingkongChen/codeslide/blob/main/docs/REFERENCE.md">Reference</a> for more usage information</li>
<li>See <a href="https://github.com/AsherJingkongChen/codeslide/blob/main/docs/CHANGELOG.md">Change Log</a> for more version information</li>
</ul>
<h2 id="creator">Creator</h2>
<ul>
<li><a href="https://github.com/AsherJingkongChen">AsherJingkongChen</a></li>
</ul>
</p>
</div>
<div class="slide" id="slide_2">
<h1 id="the-general-process">The general process</h1>
<ol>
<li>Build a <strong><code>Renderer</code></strong></li>
<li>Render HTML and CSS</li>
<li>Print the slideshow to the output</li>
</ol>
</div>
<div class="slide" id="slide_3">
<h1 id="build-a-renderer">Build a <code>Renderer</code></h1>
<h2 id="renderer"><code>Renderer</code></h2>
<ul>
<li><code>Renderer.parse</code>: Parse the manifest into renderer</li>
<li><code>Renderer.render</code>: Render the slideshow</li>
</ul>
<p><pre><code class="language-ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Stylesheets</span>, <span class="hljs-title class_">Template</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./slides&#x27;</span>;
<span class="hljs-keyword">import</span> { render <span class="hljs-keyword">as</span> renderEta } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;eta&#x27;</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ManifestParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./parsers&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Renderer</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">ManifestParser</span>&gt;;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Renderer</span> {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> parse = (
    <span class="hljs-attr">manifest</span>: <span class="hljs-built_in">string</span>
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Renderer</span>&gt; =&gt; (
    <span class="hljs-title class_">ManifestParser</span>.<span class="hljs-title function_">parseAsync</span>(manifest)
  );

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> render = (
    <span class="hljs-attr">renderer</span>: <span class="hljs-title class_">Renderer</span>
  ): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> <span class="hljs-title function_">renderEta</span>(<span class="hljs-title class_">Template</span>, {
    <span class="hljs-attr">layout</span>: renderer.<span class="hljs-property">layout</span>,
    <span class="hljs-attr">slides</span>: renderer.<span class="hljs-property">slides</span>,
    <span class="hljs-attr">style</span>: <span class="hljs-string">`\
&lt;style&gt;
<span class="hljs-subst">${[
  Stylesheets[<span class="hljs-string">&#x27;github&#x27;</span>],
  Stylesheets[renderer.layout],
  ...renderer.styles,
<span class="hljs-string">`code {
  font-family: <span class="hljs-subst">${renderer.fontFamily}</span>;
  font-size: 85%;
}`</span>,
<span class="hljs-string">`#slides {
  font-family: system-ui;
  font-size: <span class="hljs-subst">${renderer.fontSize}</span>;
  font-weight: <span class="hljs-subst">${renderer.fontWeight}</span>;
  line-height: 1.5;
}`</span>,
].join(<span class="hljs-string">&#x27;\n&#x27;</span>)}</span>
&lt;/style&gt;`</span>,
  }, { <span class="hljs-attr">autoTrim</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">tags</span>: [<span class="hljs-string">&#x27;{%&#x27;</span>, <span class="hljs-string">&#x27;%}&#x27;</span>] });
}
</code></pre></p>
</div>
<div class="slide" id="slide_4">
<h1 id="build-a-renderer-1">Build a <code>Renderer</code></h1>
<h2 id="parsers">Parsers</h2>
<p><code>Renderer</code> = <code>ManifestParser</code> (Parsed)</p>
<p><code>ManifestParser</code> = <code>FrontMatterParser</code> + <code>SlideShowParser</code></p>
</div>
<div class="slide" id="slide_5">
<h1 id="build-a-renderer-2">Build a <code>Renderer</code></h1>
<h2 id="manifestparser"><code>ManifestParser</code></h2>
<p><pre><code class="language-ts"><span class="hljs-keyword">import</span> matter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;gray-matter&#x27;</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FrontMatterParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./FrontMatterParser&#x27;</span>;
<span class="hljs-keyword">import</span> { _getContent } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./_getContent&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SlideShowParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./SlideShowParser&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ManifestParser</span> = z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">transform</span>(
  <span class="hljs-keyword">async</span> (<span class="hljs-attr">manifest</span>: <span class="hljs-built_in">string</span>) =&gt; {
    manifest = manifest.<span class="hljs-title function_">replace</span>(
      <span class="hljs-regexp">/^[\u200B\u200C\u200D\u200E\u200F\uFEFF]/</span>, <span class="hljs-string">&#x27;&#x27;</span>
    );
    <span class="hljs-keyword">const</span> { content, data } = <span class="hljs-title function_">matter</span>(manifest);
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">codeslide</span> === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
        <span class="hljs-string">&#x27;Cannot find the key &quot;codeslide&quot; in the Front Matter section&#x27;</span>
      );
    }
    <span class="hljs-keyword">const</span> codeslide = <span class="hljs-title class_">FrontMatterParser</span>.<span class="hljs-title function_">parse</span>(data.<span class="hljs-property">codeslide</span>);
    <span class="hljs-keyword">const</span> slides = <span class="hljs-keyword">await</span> <span class="hljs-title class_">SlideShowParser</span>.<span class="hljs-title function_">parseAsync</span>(content);
    codeslide.<span class="hljs-property">styles</span> = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
      codeslide.<span class="hljs-property">styles</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> <span class="hljs-title function_">_getContent</span>(path))
    );
    <span class="hljs-keyword">return</span> { slides, ...codeslide };
  }
);
</code></pre></p>
</div>
<div class="slide" id="slide_6">
<h1 id="build-a-renderer-3">Build a <code>Renderer</code></h1>
<h2 id="frontmatterparser"><code>FrontMatterParser</code></h2>
<p><pre><code class="language-ts"><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;
<span class="hljs-keyword">import</span> { isFormat } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../Format&#x27;</span>;
<span class="hljs-keyword">import</span> { isLayout } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../Layout&#x27;</span>;
<span class="hljs-keyword">import</span> { isPageSize } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../PageSize&#x27;</span>;
<span class="hljs-keyword">import</span> { version } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../package.json&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">FrontMatterParser</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">fontFamily</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">default</span>(<span class="hljs-string">&#x27;&#x27;</span>).<span class="hljs-title function_">transform</span>(<span class="hljs-function">(<span class="hljs-params">arg</span>) =&gt;</span> <span class="hljs-string">`\
<span class="hljs-subst">${arg ? <span class="hljs-string">`<span class="hljs-subst">${arg}</span>, `</span> : <span class="hljs-string">&#x27;&#x27;</span>}</span>ui-monospace, SFMono-Regular, \
SF Mono, Menlo, Consolas, Liberation Mono, monospace`</span>
  ),
  <span class="hljs-attr">fontSize</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">default</span>(<span class="hljs-string">&#x27;large&#x27;</span>),
  <span class="hljs-attr">fontWeight</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">default</span>(<span class="hljs-string">&#x27;normal&#x27;</span>),
  <span class="hljs-attr">format</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">refine</span>(isFormat).<span class="hljs-title function_">default</span>(<span class="hljs-string">&#x27;html&#x27;</span>),
  <span class="hljs-attr">layout</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">refine</span>(isLayout).<span class="hljs-title function_">default</span>(<span class="hljs-string">&#x27;horizontal&#x27;</span>),
  <span class="hljs-attr">pageSize</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">refine</span>(isPageSize).<span class="hljs-title function_">default</span>(<span class="hljs-string">&#x27;A4&#x27;</span>),
  <span class="hljs-attr">styles</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()).<span class="hljs-title function_">default</span>([]),
  <span class="hljs-attr">version</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">default</span>(version),
})
.<span class="hljs-title function_">strict</span>()
.<span class="hljs-title function_">transform</span>(<span class="hljs-function">(<span class="hljs-params">fm</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (
    fm.<span class="hljs-property">layout</span> === <span class="hljs-string">&#x27;horizontal&#x27;</span> &amp;&amp;
    fm.<span class="hljs-property">format</span> === <span class="hljs-string">&#x27;pdf&#x27;</span>
  ) {
    fm.<span class="hljs-property">layout</span> = <span class="hljs-string">&#x27;vertical&#x27;</span>;
  }
  <span class="hljs-keyword">return</span> fm;
});
</code></pre></p>
</div>
<div class="slide" id="slide_7">
<h1 id="build-a-renderer-4">Build a <code>Renderer</code></h1>
<h2 id="slideshowparser"><code>SlideShowParser</code></h2>
<p><pre><code class="language-ts"><span class="hljs-keyword">import</span> hljs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;highlight.js&#x27;</span>;
<span class="hljs-keyword">import</span> { marked } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;marked&#x27;</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;
<span class="hljs-keyword">import</span> { _getContent } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./_getContent&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">SlideShowParser</span> = z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">transform</span>(<span class="hljs-function">(<span class="hljs-params">markdown</span>) =&gt;</span> (
  <span class="hljs-title function_">_parseSlideShow</span>(markdown).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">html</span>) =&gt;</span> (
    html.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;&lt;hr&gt;&#x27;</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-title function_">trim</span>())
  ))
));

<span class="hljs-keyword">const</span> _parseSlideShow = (
  <span class="hljs-attr">markdown</span>: <span class="hljs-built_in">string</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; =&gt; marked.<span class="hljs-title function_">parse</span>(markdown, {
  <span class="hljs-attr">async</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">highlight</span>: <span class="hljs-function">(<span class="hljs-params">code, language</span>) =&gt;</span> (
    hljs.<span class="hljs-title function_">highlight</span>(code, { language }).<span class="hljs-property">value</span>
  ),
  <span class="hljs-attr">walkTokens</span>: <span class="hljs-keyword">async</span> (<span class="hljs-attr">token</span>: marked.<span class="hljs-property">Token</span>) =&gt; {
    <span class="hljs-keyword">if</span> (token.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;link&#x27;</span>) {
      <span class="hljs-keyword">const</span> { href, text, raw } = token;
      <span class="hljs-keyword">if</span> (! text.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;:&#x27;</span>)) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">const</span> [prefix, suffix] = &lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>]&gt;
        text.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;.&#x27;</span>);
      <span class="hljs-keyword">if</span> (prefix === <span class="hljs-string">&#x27;:slide&#x27;</span>) {
        token = <span class="hljs-title function_">_toHTMLToken</span>(token);
        token.<span class="hljs-property">raw</span> = raw;
        token.<span class="hljs-property">text</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">_getContent</span>(href)
          .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">content</span>) =&gt;</span> <span class="hljs-title function_">_parseSlideShow</span>(content));
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (prefix === <span class="hljs-string">&#x27;:code&#x27;</span>) {
        token = <span class="hljs-title function_">_toHTMLToken</span>(token);
        token.<span class="hljs-property">raw</span> = raw;
        <span class="hljs-keyword">const</span> code = <span class="hljs-keyword">await</span> <span class="hljs-title function_">_getContent</span>(href).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">content</span>) =&gt;</span> (
          hljs.<span class="hljs-title function_">highlight</span>(content, {
            <span class="hljs-attr">language</span>: suffix ?? <span class="hljs-string">&#x27;plaintext&#x27;</span>
          })
        ));
        token.<span class="hljs-property">text</span> = <span class="hljs-string">`\
&lt;pre&gt;&lt;code<span class="hljs-subst">${
  code.language ? <span class="hljs-string">` class=&quot;language-<span class="hljs-subst">${code.language}</span>&quot;`</span> : <span class="hljs-string">&#x27;&#x27;</span>
}</span>&gt;<span class="hljs-subst">${
  code.value
}</span>&lt;/code&gt;&lt;/pre&gt;`</span>;
      }
    }
  },
});

<span class="hljs-keyword">const</span> _toHTMLToken = (
  <span class="hljs-attr">token</span>: marked.<span class="hljs-property">Token</span>
): marked.<span class="hljs-property">Tokens</span>.<span class="hljs-property">HTML</span> =&gt; {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> p <span class="hljs-keyword">in</span> token) {
    <span class="hljs-keyword">if</span> (token.<span class="hljs-title function_">hasOwnProperty</span>(p)){
      <span class="hljs-keyword">delete</span> token[p <span class="hljs-keyword">as</span> keyof marked.<span class="hljs-property">Token</span>];
    }
  }
  token = token <span class="hljs-keyword">as</span> marked.<span class="hljs-property">Token</span>;
  token.<span class="hljs-property">type</span> = <span class="hljs-string">&#x27;html&#x27;</span>;
  token = token <span class="hljs-keyword">as</span> marked.<span class="hljs-property">Tokens</span>.<span class="hljs-property">HTML</span>;
  token.<span class="hljs-property">pre</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">return</span> token;
};
</code></pre></p>
</div>
<div class="slide" id="slide_8">
<h1 id="build-a-renderer-5">Build a <code>Renderer</code></h1>
<h2 id="the-utility-to-acquire-resources">The utility to acquire resources</h2>
<p><pre><code class="language-ts"><span class="hljs-keyword">import</span> { isNode } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;browser-or-node&#x27;</span>;
<span class="hljs-keyword">import</span> { fetch } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;cross-fetch&#x27;</span>;
<span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;
<span class="hljs-keyword">import</span> { pathToFileURL } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;url&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> _getContent = <span class="hljs-keyword">async</span> (
  <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> | <span class="hljs-variable constant_">URL</span>,
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; =&gt; {
  <span class="hljs-keyword">if</span> (isNode) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> path === <span class="hljs-string">&#x27;string&#x27;</span>) {
      <span class="hljs-keyword">try</span> {
        path = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(path);
      } <span class="hljs-keyword">catch</span> (err) {
        path = <span class="hljs-title function_">pathToFileURL</span>(path.<span class="hljs-title function_">toString</span>());
      }
    }
    <span class="hljs-keyword">if</span> (path.<span class="hljs-property">protocol</span> === <span class="hljs-string">&#x27;file:&#x27;</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">readFileSync</span>(path, <span class="hljs-string">&#x27;utf8&#x27;</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(path).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (r) =&gt; {
        <span class="hljs-keyword">if</span> (r.<span class="hljs-property">ok</span>) { <span class="hljs-keyword">return</span> r.<span class="hljs-title function_">text</span>(); }
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">await</span> r.<span class="hljs-title function_">text</span>());
      });
    }
  }
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
    <span class="hljs-string">&#x27;_getContent is not implemented yet for the current platform&#x27;</span>
  );
};
</code></pre></p>
</div>
<div class="slide" id="slide_9">
<h1 id="build-a-renderer-6">Build a <code>Renderer</code></h1>
<h2 id="options">Options</h2>
<ul>
<li><p>Export a slideshow as a HTML or PDF file
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Format</span> = keyof <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Format</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Format</span> = {
  <span class="hljs-attr">html</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">pdf</span>: <span class="hljs-literal">true</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> isFormat = (
  <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
): raw is <span class="hljs-title class_">Format</span> =&gt; raw <span class="hljs-keyword">in</span> <span class="hljs-title class_">Format</span>;
</code></pre></p>
</li>
<li><p>Specify the page size in PDF format
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">PageSize</span> = keyof <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">PageSize</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">PageSize</span> = {
  <span class="hljs-attr">letter</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">legal</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">tabloid</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">ledger</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">A0</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">A1</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">A2</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">A3</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">A4</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">A5</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">A6</span>: <span class="hljs-literal">true</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> isPageSize = (
  <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
): raw is <span class="hljs-title class_">PageSize</span> =&gt; raw <span class="hljs-keyword">in</span> <span class="hljs-title class_">PageSize</span>;
</code></pre></p>
</li>
<li><p>Present the slideshow in horizontal or vertical layout
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Layout</span> = keyof <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Layout</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Layout</span> = {
  <span class="hljs-string">&#x27;horizontal&#x27;</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">&#x27;vertical&#x27;</span>: <span class="hljs-literal">true</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> isLayout = (
  <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
): raw is <span class="hljs-title class_">Layout</span> =&gt; raw <span class="hljs-keyword">in</span> <span class="hljs-title class_">Layout</span>;
</code></pre></p>
</li>
</ul>
</div>
<div class="slide" id="slide_10">
<h1 id="render-html-and-css">Render HTML and CSS</h1>
<h2 id="html-template">HTML template</h2>
<p>CodeSlide depends on <a href="https://github.com/eta-dev/eta">Eta</a> 
to render HTML template.</p>
<p>{% and %} are interpolation characters.</p>
<p><pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">HTML</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hljs&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span>
  <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;CodeSlide makes a slideshow for code snippets&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span>
  <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span>
{%~ it.style %}
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hljs&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;slides&quot;</span>&gt;</span>
{%_ for (const [index, slide] of it.slides.entries()) { %}
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;slide&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;slide_{%~ index %}&quot;</span>&gt;</span>
  {%_ if (index !== 0 &amp;&amp; it.layout === &#x27;vertical&#x27;) { %}
  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>
  {%_ } %}
{%~ slide %}
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
{%_ } %}
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></p>
</div>
<div class="slide" id="slide_11">
<h1 id="render-html-and-css-1">Render HTML and CSS</h1>
<h2 id="css-horizontal-layout">CSS (Horizontal layout)</h2>
<p><pre><code class="language-css"><span class="hljs-comment">/*! CodeSlide slides.horizontal.css */</span>
<span class="hljs-selector-tag">html</span>, <span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  -webkit-print-<span class="hljs-attribute">color</span>-adjust: exact;
  print-<span class="hljs-attribute">color</span>-adjust: exact;
  <span class="hljs-attribute">overflow</span>: hidden;
}
<span class="hljs-selector-tag">a</span> {
  <span class="hljs-attribute">color</span>: dodgerblue;
}
<span class="hljs-selector-tag">li</span> {
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0.25em</span>;
}
<span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:empty</span> {
  <span class="hljs-attribute">display</span>: none;
}
pre {
  <span class="hljs-attribute">white-space</span>: pre-wrap;
  <span class="hljs-attribute">overflow-wrap</span>: break-word;
}
pre &gt; <span class="hljs-selector-tag">code</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span>;
}
<span class="hljs-selector-class">.slide</span> {
  <span class="hljs-attribute">min-width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vw</span> - <span class="hljs-number">4em</span>);
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">2em</span>);
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span> <span class="hljs-number">2em</span>;
  <span class="hljs-attribute">overflow-y</span>: scroll;
  <span class="hljs-attribute">scroll-snap-align</span>: start;
  <span class="hljs-attribute">scroll-snap-stop</span>: always;
  <span class="hljs-attribute">scrollbar-width</span>: none;
}
<span class="hljs-selector-class">.slide</span>::-webkit-scrollbar {
  <span class="hljs-attribute">display</span>: none;
}
<span class="hljs-keyword">@media</span> <span class="hljs-keyword">only</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.slide</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">90%</span> - <span class="hljs-number">2em</span>);
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100s</span>vh - <span class="hljs-number">2em</span>);
  }
}
<span class="hljs-selector-id">#slides</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: row;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">overflow-x</span>: scroll;
  overscroll-behavior: none;
  scroll-behavior: smooth;
  <span class="hljs-attribute">scroll-snap-type</span>: x mandatory;
}
<span class="hljs-keyword">@media</span> print {
  <span class="hljs-keyword">@page</span> {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    size: auto;
  }
  <span class="hljs-selector-id">#slides</span> {
    <span class="hljs-attribute">width</span>: auto;
    <span class="hljs-attribute">height</span>: auto;
  }
}
</code></pre></p>
</div>
<div class="slide" id="slide_12">
<h1 id="render-html-and-css-2">Render HTML and CSS</h1>
<h2 id="css-vertical-layout">CSS (Vertical layout)</h2>
<p><pre><code class="language-css"><span class="hljs-comment">/*! CodeSlide slides.vertical.css */</span>
<span class="hljs-selector-tag">html</span>, <span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  -webkit-print-<span class="hljs-attribute">color</span>-adjust: exact;
  print-<span class="hljs-attribute">color</span>-adjust: exact;
  <span class="hljs-attribute">overflow</span>: hidden;
}
<span class="hljs-selector-tag">a</span> {
  <span class="hljs-attribute">color</span>: dodgerblue;
}
<span class="hljs-selector-tag">li</span> {
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0.25em</span>;
}
<span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:empty</span> {
  <span class="hljs-attribute">display</span>: none;
}
pre {
  <span class="hljs-attribute">white-space</span>: pre-wrap;
  <span class="hljs-attribute">overflow-wrap</span>: break-word;
}
pre &gt; <span class="hljs-selector-tag">code</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span>;
}
<span class="hljs-selector-class">.slide</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span> <span class="hljs-number">2em</span>;
}
<span class="hljs-selector-id">#slides</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">position</span>: absolute; <span class="hljs-comment">/* fix height on mobile */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">overflow-y</span>: scroll;
  overscroll-behavior: none;
  scroll-behavior: smooth;
}
<span class="hljs-keyword">@media</span> print {
  <span class="hljs-keyword">@page</span> {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    size: auto;
  }
  <span class="hljs-selector-id">#slides</span> {
    <span class="hljs-attribute">width</span>: auto;
    <span class="hljs-attribute">height</span>: auto;
  }
}
</code></pre></p>
</div>
<div class="slide" id="slide_13">
<h1 id="render-html-and-css-3">Render HTML and CSS</h1>
<h2 id="referenced-as-text-modules">Referenced as text modules</h2>
<p><pre><code class="language-ts"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;*.css&#x27;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">_</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> _;
}
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;*.html&#x27;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">_</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> _;
}
</code></pre>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> <span class="hljs-title class_">GithubDarkDimmed</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./github-dark-dimmed.css&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">HorizontalStylesheet</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./slides.horizontal.css&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VerticalStylesheet</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./slides.vertical.css&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Template</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./slides.html&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Stylesheets</span> = {
  <span class="hljs-attr">horizontal</span>: <span class="hljs-title class_">HorizontalStylesheet</span>,
  <span class="hljs-attr">vertical</span>: <span class="hljs-title class_">VerticalStylesheet</span>,
  <span class="hljs-attr">github</span>: <span class="hljs-title class_">GithubDarkDimmed</span>,
};

<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Stylesheets</span>, <span class="hljs-title class_">Template</span> };
</code></pre></p>
</div>
<div class="slide" id="slide_14">
<h1 id="print-the-slideshow-to-the-output">Print the slideshow to the output</h1>
<p>The print process is implemented by application ...</p>
</div>
<div class="slide" id="slide_15">
<h1 id="applications-of-codeslide">Applications of CodeSlide</h1>
<ol>
<li>CodeSlide CLI</li>
</ol>
</div>
<div class="slide" id="slide_16">
<p><h1 id="codeslide-cli">CodeSlide CLI</h1>
<p><a href="https://www.npmjs.com/package/codeslide-cli?activeTab=readme"><img src="https://img.shields.io/npm/v/codeslide-cli?color=%230647D4&label=npm&style=flat-square" alt=""></a></p>
<h2 id="usage-demo">Usage demo</h2>
<p><img src="https://raw.githubusercontent.com/AsherJingkongChen/codeslide/main/applications/cli/docs/assets/cli-usage.gif" alt=""></p>
<p>See also <a href="https://github.com/AsherJingkongChen/codeslide/tree/main/applications/cli/examples/"><strong>Example usages</strong></a></p>
<h2 id="installation">Installation</h2>
<ol>
<li>Prepare <code>Node.js</code> runtime and <code>NPM</code> package manager</li>
<li>Run <code>npm install -g codeslide-cli</code> on the command line</li>
</ol>
<h2 id="features">Features</h2>
<ul>
<li>It is an application of <a href="https://github.com/AsherJingkongChen/codeslide">CodeSlide</a></li>
<li>It allows you to easily make awesome slideshows for code snippets on command lines</li>
<li>It is a Node.js Command Line Interface (CLI)</li>
</ul>
<h2 id="documents">Documents</h2>
<ul>
<li>See <a href="https://github.com/AsherJingkongChen/codeslide/blob/main/applications/cli/docs/REFERENCE.md"><strong>Reference</strong></a> for more information</li>
</ul>
<h2 id="creator">Creator</h2>
<ul>
<li><a href="https://github.com/AsherJingkongChen">AsherJingkongChen</a></li>
</ul>
</p>
</div>
<div class="slide" id="slide_17">
<h1 id="cli-entry-point">CLI entry point</h1>
<p><pre><code class="language-ts"><span class="hljs-keyword">import</span> { program } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;commander&#x27;</span>;
<span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;
<span class="hljs-keyword">import</span> { stdin, stdout } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;process&#x27;</span>;
<span class="hljs-keyword">import</span> { version, homepage, name } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../package.json&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CLIOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./CLIOptions&#x27;</span>;
<span class="hljs-keyword">import</span> { print } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./print&#x27;</span>;

program
  .<span class="hljs-title function_">name</span>(name)
  .<span class="hljs-title function_">description</span>(<span class="hljs-string">`\
Example: <span class="hljs-subst">${name}</span> -m ./manifest.md -o ./output.html

Make a slideshow (HTML/PDF file) for code snippets
with a manifest (Markdown file).

Go to home page for more information: <span class="hljs-subst">${homepage}</span>`</span>
  )
  .<span class="hljs-title function_">version</span>(version, <span class="hljs-string">&#x27;-v, --version&#x27;</span>, <span class="hljs-string">`\
Check the version number.`</span>
  )
  .<span class="hljs-title function_">helpOption</span>(<span class="hljs-string">&#x27;-h, --help&#x27;</span>, <span class="hljs-string">`\
Check all options and their description.`</span>
  )
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">&#x27;-o, --output [local_path]&#x27;</span>, <span class="hljs-string">`\
The &quot;output file path&quot; of slideshow.
By default it writes the output to stdout.`</span>
  )
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">&#x27;-m, --manifest [local_path]&#x27;</span>, <span class="hljs-string">`\
The &quot;manifest file path&quot; of slideshow.
By default it reads manifest from stdin.`</span>
  )
  .<span class="hljs-title function_">action</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">options</span>: <span class="hljs-title class_">CLIOptions</span>) =&gt; {
    <span class="hljs-keyword">let</span> { output, manifest } = <span class="hljs-title class_">CLIOptions</span>.<span class="hljs-title function_">parse</span>(options);
    <span class="hljs-keyword">if</span> (manifest) {
      <span class="hljs-title function_">print</span>(output ?? stdout.<span class="hljs-property">fd</span>, <span class="hljs-title function_">readFileSync</span>(manifest, <span class="hljs-string">&#x27;utf8&#x27;</span>));
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">let</span> data = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">0</span>);
      stdin
        .<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> {
          data = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>([data, d]);
        })
        .<span class="hljs-title function_">once</span>(<span class="hljs-string">&#x27;end&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">print</span>(output ?? stdout.<span class="hljs-property">fd</span>, data.<span class="hljs-title function_">toString</span>(<span class="hljs-string">&#x27;utf8&#x27;</span>));
        });
    }
  })
  .<span class="hljs-title function_">parseAsync</span>()
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> { <span class="hljs-keyword">throw</span> err; });
</code></pre></p>
</div>
<div class="slide" id="slide_18">
<h1 id="cli-options-validation">CLI options validation</h1>
<ol>
<li><code>-m, --manifest</code>: Manifest file path</li>
<li><code>-o, --output</code>: Output file path</li>
</ol>
<p><pre><code class="language-ts"><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">CLIOptions</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">CLIOptions</span>&gt;;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CLIOptions</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">manifest</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>(),
  <span class="hljs-attr">output</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>(),
})
.<span class="hljs-title function_">strict</span>();
</code></pre></p>
</div>
<div class="slide" id="slide_19">
<h1 id="build-a-renderer-and-print-to-the-output">Build a <code>Renderer</code> and Print to the output</h1>
<p>Make use of <code>Renderer.parse</code> and <code>Renderer.render</code></p>
<p><pre><code class="language-ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PathOrFileDescriptor</span>, writeFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;
<span class="hljs-keyword">import</span> { launch } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;puppeteer&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Renderer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../../src&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> print = <span class="hljs-keyword">async</span> (
  <span class="hljs-attr">output</span>: <span class="hljs-title class_">PathOrFileDescriptor</span>,
  <span class="hljs-attr">manifest</span>: <span class="hljs-built_in">string</span>,
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Renderer</span>.<span class="hljs-title function_">parse</span>(manifest);
  <span class="hljs-keyword">if</span> (renderer.<span class="hljs-property">format</span> === <span class="hljs-string">&#x27;html&#x27;</span>) {
    <span class="hljs-title function_">writeFileSync</span>(output, <span class="hljs-title class_">Renderer</span>.<span class="hljs-title function_">render</span>(renderer), <span class="hljs-string">&#x27;utf8&#x27;</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (renderer.<span class="hljs-property">format</span> === <span class="hljs-string">&#x27;pdf&#x27;</span>) {
    <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> <span class="hljs-title function_">launch</span>();
    <span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">newPage</span>();
    <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">setContent</span>(<span class="hljs-title class_">Renderer</span>.<span class="hljs-title function_">render</span>(renderer));
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">pdf</span>({
      <span class="hljs-attr">printBackground</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">format</span>: renderer.<span class="hljs-property">pageSize</span>,
    });
    <span class="hljs-keyword">const</span> closeBrowser = browser.<span class="hljs-title function_">close</span>();
    <span class="hljs-title function_">writeFileSync</span>(output, result, <span class="hljs-string">&#x27;base64&#x27;</span>);
    <span class="hljs-keyword">await</span> closeBrowser;
  }
};
</code></pre></p>
</div>
<div class="slide" id="slide_20">
<h1 id="thanks-for-your-watching">Thanks for your watching!</h1>
<p>See other CodeSlide CLI examples <a href="https://github.com/AsherJingkongChen/codeslide/tree/main/applications/cli/examples">here</a></p>
<p>See the installation guide of CodeSlide CLI <a href="https://github.com/AsherJingkongChen/codeslide/tree/main/applications/cli/README.md#installation">here</a></p>
</div>
</div>
</body>
</html>
